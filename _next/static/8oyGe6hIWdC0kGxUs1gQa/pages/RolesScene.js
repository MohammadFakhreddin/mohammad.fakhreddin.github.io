(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{FHgp:function(e,t,r){"use strict";r.d(t,"a",(function(){return A}));var a=r("hfKm"),n=r.n(a),s=r("2Eek"),i=r.n(s),o=r("XoMD"),l=r.n(o),u=r("Jo+v"),c=r.n(u),d=r("4mXO"),h=r.n(d),f=r("pLtp"),p=r.n(f),m=r("sLSF"),b=r("MI3g"),g=r("a7VT"),y=r("Tit0"),v=r("0iUn"),x=r("vYYK"),O=r("q1tI"),N=r.n(O),w=r("O/Ae"),E=r("hDrk"),j=r("+son"),R=r("Gr5k"),T=r("ynrD"),k=r("IAK1"),_=N.a.createElement;function S(e,t){var r=p()(e);if(h.a){var a=h()(e);t&&(a=a.filter((function(t){return c()(e,t).enumerable}))),r.push.apply(r,a)}return r}var C=function e(){Object(v.a)(this,e)};Object(x.a)(C,"label",{marginBottom:"0.5em",opacity:.8}),Object(x.a)(C,"bottomError",{height:"1.7em",width:"100%",paddingTop:"1em"}),Object(x.a)(C,"errorText",{opacity:1});var A=function(e){function t(){return Object(v.a)(this,t),Object(b.a)(this,Object(g.a)(t).apply(this,arguments))}return Object(y.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){Object(x.a)(e,t,r[t])})):l.a?i()(e,l()(r)):S(Object(r)).forEach((function(t){n()(e,t,c()(r,t))}))}return e}({width:this.props.width},this.props.style),t=!0===j.a.isNullOrEmpty(this.props.errorText);return _("div",{className:"form-group"+(this.props.isRequired?" required ":"")+(E.a.getInstance().getUserState().getIsRtl()?" rtl ":" ltr "),style:e},_(R.a,{autoJustifyContent:"from-start"},_(k.a,{size:w.d.label,text:this.props.label,className:"control-label",style:C.label,color:w.a.black})),this.props.renderChildren({isValid:!0===t}),_(R.a,{style:C.bottomError,autoJustifyContent:"from-start"},!1===t&&_(T.a,{color:w.a.red,size:w.d.label,text:this.props.errorText,style:C.errorText})))}}]),t}(N.a.PureComponent);Object(x.a)(A,"defaultProps",{width:"20em",isRequired:!0,label:"",style:{},errorText:null,renderChildren:function(){return null}})},K95y:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/RolesScene",function(){return r("XFqF")}])},XFqF:function(e,t,r){"use strict";r.r(t),r.d(t,"default",(function(){return Y}));var a=r("hfKm"),n=r.n(a),s=r("2Eek"),i=r.n(s),o=r("XoMD"),l=r.n(o),u=r("Jo+v"),c=r.n(u),d=r("4mXO"),h=r.n(d),f=r("pLtp"),p=r.n(f),m=r("ln6h"),b=r.n(m),g=r("XXOK"),y=r.n(g),v=r("kOwS"),x=r("sLSF"),O=r("MI3g"),N=r("a7VT"),w=r("AT/M"),E=r("Tit0"),j=r("0iUn"),R=r("vYYK"),T=r("q1tI"),k=r.n(T),_=r("7vrA"),S=r("BDHQ"),C=r("lx2u"),A=r("Gr5k"),I=r("Axit"),P=r("miVr"),F=r("FHgp"),q=r("Ytu8"),B=r("IAK1"),D=r("O/Ae"),L=r("WoZq"),V=r("hDrk"),J=r("EHiG"),K=r("ljLU"),M=r("dJve"),W=r("halr"),X=r("+son"),U=k.a.createElement;function H(e,t){var r=p()(e);if(h.a){var a=h()(e);t&&(a=a.filter((function(t){return c()(e,t).enumerable}))),r.push.apply(r,a)}return r}var z=function e(){Object(j.a)(this,e)};Object(R.a)(z,"root",{transition:"0.5s",width:"100%",minHeight:"100%",alignItems:"center",display:"flex",flexDirection:"column",overflowX:"hidden",alignContent:"center"}),Object(R.a)(z,"card",{marginTop:"2em",marginBottom:"1em",width:"100%",display:"flex",flexDirection:"column",alignContent:"center",alignItems:"center"}),Object(R.a)(z,"itemsRoot",{marginTop:"1em"}),Object(R.a)(z,"listItem",{width:"100%",display:"flex",alignContent:"center",alignItems:"center",justifyContent:"center",flexDirection:"row",padding:"0.1em",marginBottom:"0.5em"}),Object(R.a)(z,"listItemSpacer",{width:"5em"}),Object(R.a)(z,"itemText",{paddingTop:"1em",height:"100%"}),Object(R.a)(z,"addNewRoleButtonLayout",{marginTop:"0em"});var Y=function(e){function t(e){var r;return Object(j.a)(this,t),r=Object(O.a)(this,Object(N.a)(t).call(this,e)),Object(R.a)(Object(w.a)(r),"state",{isNavBarMinimized:V.a.getInstance().getUserState().getIsNavBarMinimized(),requestState:"idle",roles:[],addNewRoleErrorText:null}),Object(R.a)(Object(w.a)(r),"checkForAuthentication",!0),Object(R.a)(Object(w.a)(r),"addNewRoleEditText",null),r.selectedNavBarKey="nav_bar_item_roles_list",r.fillRolesFromDataAccessPoint(),r.onAddNewRoleButtonPressed=r.onAddNewRoleButtonPressed.bind(Object(w.a)(r)),r.requestForRoles=r.requestForRoles.bind(Object(w.a)(r)),r.onEditRolesPressed=r.onEditRolesPressed.bind(Object(w.a)(r)),r}return Object(E.a)(t,e),Object(x.a)(t,[{key:"sceneDidMount",value:function(){this.requestForRoles()}},{key:"renderAfterNavbar",value:function(){var e=X.a.isEmptyArray(this.state.roles);return U(_.a,{style:z.root},U(C.a,{style:z.card,hasShadow:!0},U(A.a,{autoJustifyContent:"from-start"},U(B.a,{text:W.a.translate("roles_scene_card_title"),size:D.d.bh3}),U("div",{className:"spacer"})),U(I.a,{rootStyle:z.itemsRoot,requestState:this.state.requestState,onRetryButtonPressed:this.requestForRoles,isEmpty:e},U(A.a,{autoJustifyContent:"from-start",wrapElementsWhenNeeded:!0},this.renderRoles({isRolesEmpty:e})))),this.renderAddNewRoleCard())}},{key:"renderAddNewRoleCard",value:function(){var e=this;return U(C.a,{style:z.card,hasShadow:!0},U(A.a,{autoJustifyContent:"from-start"},U(B.a,{text:W.a.translate("roles_scene_add_new_role_title"),size:D.d.bh3})),U(A.a,{autoJustifyContent:"none"},U(F.a,{isRequired:!0,errorText:this.state.addNewRoleErrorText,width:"100%",label:W.a.translate("roles_scene_create_new_role_label"),renderChildren:function(t){return U(P.a,Object(v.a)({},t,{placeholder:W.a.translate("roles_scene_create_new_role_placeholder"),minWidth:"100%",ref:function(t){return e.addNewRoleEditText=t}}))}})),U(A.a,{autoJustifyContent:"from-end",style:z.addNewRoleButtonLayout},U(S.a,{text:W.a.translate("roles_scene_add_new_role_button"),onPress:this.onAddNewRoleButtonPressed,minWidth:L.a.smallButtonWidth,height:L.a.smallButtonHeight,needsLoadingOnPress:!0})))}},{key:"fillRolesFromDataAccessPoint",value:function(){if(this.state.roles=[],!0===V.a.getInstance().getUserState().getIsRolesFilledOnce()){var e=!0,t=!1,r=void 0;try{for(var a,n=y()(V.a.getInstance().getUserState().getRoles().values());!(e=(a=n.next()).done);e=!0){var s=a.value;this.state.roles.push(s)}}catch(i){t=!0,r=i}finally{try{e||null==n.return||n.return()}finally{if(t)throw r}}}}},{key:"renderRoles",value:function(e){var t=this,r=[];if(!1===e.isRolesEmpty){var a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){Object(R.a)(e,t,r[t])})):l.a?i()(e,l()(r)):H(Object(r)).forEach((function(t){n()(e,t,c()(r,t))}))}return e}({},z.listItem,{flex:1,minWidth:L.a.twoRowCardItemMinWidth}),s=null,o=!0,u=!1,d=void 0;try{for(var h,f=function(){var e=h.value;s=function(){return t.onEditRolesPressed(e.getName())},r.push(U(A.a,{style:a,key:e.getKey(),autoJustifyContent:"from-start"},U(A.a,{autoJustifyContent:"from-start"},U(B.a,{text:e.getName(),size:D.d.h3,style:z.itemText}),U("div",{className:"spacer"}),U(S.a,{isEnabled:!0,onPress:s,text:W.a.translate("roles_scene_edit_role"),backgroundColor:D.a.lightBlue,textColor:D.a.blue,minWidth:L.a.smallButtonWidth,height:L.a.smallButtonHeight})),U("div",{style:z.listItemSpacer})))},p=y()(this.state.roles);!(o=(h=p.next()).done);o=!0)f()}catch(m){u=!0,d=m}finally{try{o||null==p.return||p.return()}finally{if(u)throw d}}}return r}},{key:"onAddNewRoleButtonPressed",value:function(){var e,t,r,a,n,s,i,o,l,u,c;return b.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:if(!1!==V.a.getInstance().getUserState().getIsRolesFilledOnce()){d.next=2;break}return d.abrupt("return");case 2:if(null!=this.addNewRoleEditText){d.next=4;break}return d.abrupt("return");case 4:return d.next=6,b.a.awrap(this.setStateAsync({addNewRoleErrorText:null}));case 6:if(e=String(this.addNewRoleEditText.getText()).trim(),!1!==X.b.isValidRoleName(e)){d.next=9;break}return d.abrupt("return",this.setStateAsync({addNewRoleErrorText:W.a.translate("role_format_is_incorrect")}));case 9:if(!1!==X.a.isEmptyArray(this.state.roles)){d.next=37;break}t=e.toLowerCase(),r=!0,a=!1,n=void 0,d.prev=14,s=y()(this.state.roles);case 16:if(r=(i=s.next()).done){d.next=23;break}if(o=i.value,!X.a.compareString(String(o.getName()).toLowerCase(),t)){d.next=20;break}return d.abrupt("return",this.setStateAsync({addNewRoleErrorText:W.a.translate("role_already_exists")}));case 20:r=!0,d.next=16;break;case 23:d.next=29;break;case 25:d.prev=25,d.t0=d.catch(14),a=!0,n=d.t0;case 29:d.prev=29,d.prev=30,r||null==s.return||s.return();case 32:if(d.prev=32,!a){d.next=35;break}throw n;case 35:return d.finish(32);case 36:return d.finish(29);case 37:return d.next=39,b.a.awrap(K.a.getInstance().createNewRole({roleName:e}));case 39:l=d.sent,u=l.statusCode,c=l.errorDescription,u===M.a.statusCodes.ok?(this.alertInstance.show({title:W.a.translate("success"),description:W.a.translate("add_new_role_success_message"),isSuccess:!0}),this.addNewRoleEditText.setText(""),this.fillRolesFromDataAccessPoint(),this.setStateAsync({roles:this.state.roles})):this.alertInstance.show({title:W.a.translate("error"),description:W.a.translateErrorCode(u,c),isSuccess:!1});case 43:case"end":return d.stop()}}),null,this,[[14,25,29,37],[30,,32,36]])}},{key:"requestForRoles",value:function(){var e;return b.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if("requesting"!==this.state.requestState&&!0!==V.a.getInstance().getUserState().getIsRolesFilledOnce()){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,b.a.awrap(this.setStateAsync({requestState:"requesting"}));case 4:return t.next=6,b.a.awrap(K.a.getInstance().getRoles());case 6:e=t.sent,e.statusCode===M.a.statusCodes.ok?(this.fillRolesFromDataAccessPoint(),this.setStateAsync({requestState:"idle"})):this.setStateAsync({requestState:"failed"});case 9:case"end":return t.stop()}}),null,this)}},{key:"onEditRolesPressed",value:function(e){J.a.navigateToModifyRoleAccessScene({roleName:e})}}]),t}(q.a)},miVr:function(e,t,r){"use strict";var a=r("hfKm"),n=r.n(a),s=r("2Eek"),i=r.n(s),o=r("XoMD"),l=r.n(o),u=r("Jo+v"),c=r.n(u),d=r("4mXO"),h=r.n(d),f=r("pLtp"),p=r.n(f),m=r("0iUn"),b=r("sLSF"),g=r("MI3g"),y=r("a7VT"),v=r("AT/M"),x=r("Tit0"),O=r("vYYK"),N=r("q1tI"),w=r.n(N),E=r("O/Ae"),j=r("WoZq"),R=r("+son"),T=function(){function e(){Object(m.a)(this,e)}return Object(b.a)(e,null,[{key:"fromArabicToPersianChar",value:function(e){if(R.a.isNullOrEmpty(e))return"";for(var t=["\u064a","\u0643","\u200d","\u062f\u0650","\u0628\u0650","\u0632\u0650","\u0630\u0650","\u0650\u0634\u0650","\u0650\u0633\u0650","\u0649"],r=["\u06cc","\u06a9","","\u062f","\u0628","\u0632","\u0630","\u0634","\u0633","\u06cc"],a=0,n=t.length;a<n;a++)e=e.replace(new RegExp(t[a],"g"),r[a]);return e}},{key:"fromPersianToEnglishNumber",value:function(t){if(R.a.isNullOrEmpty(t))return"";for(var r=0;r<e.englishNumbers.length;r++)t=t.replace(new RegExp(e.persianNumbers[r],"g"),e.englishNumbers[r]);return t}},{key:"fromArabicToPersianNumber",value:function(t){if(R.a.isNullOrEmpty(t))return"";t=t.toString();for(var r=e.arabicNumbers.length,a=0;a<r;a++)t=t.replace(new RegExp(e.arabicNumbers[a],"g"),e.persianNumbers[a]);return t}},{key:"fromEnglishToPersianNumber",value:function(t){if(R.a.isNullOrEmpty(t))return"";t=t.toString();for(var r=0,a=e.englishNumbers.length;r<a;r++)t=t.replace(new RegExp(e.englishNumbers[r],"g"),e.persianNumbers[r]);return t}},{key:"fromArabicToEnglishNumber",value:function(t){if(R.a.isNullOrEmpty(t))return"";for(var r=0,a=e.englishNumbers.length;r<a;r++)t=t.replace(new RegExp(e.persianNumbers[r],"g"),e.englishNumbers[r]).replace(new RegExp(e.arabicNumbers[r],"g"),e.englishNumbers[r]);return t}},{key:"decodeURL",value:function(e){if(R.a.isNullOrEmpty(e))return"";for(var t="";t!==e;)t=e,e=e.replace(/(http\S+?)\%20/g,"$1\u200c\u200c\u200c_\u200c\u200c\u200c");return e=(e=e.replace(/(http\S+)/g,(function(e,t){return decodeURI(t)}))).replace(/\u200c\u200c\u200c_\u200c\u200c\u200c/g,"%20")}},{key:"switchFromPersianToEnglishKey",value:function(e){if(R.a.isNullOrEmpty(e))return"";for(var t=["\u0636","\u0635","\u062b","\u0642","\u0641","\u063a","\u0639","\u0647","\u062e","\u062d","\u062c","\u0686","\u0634","\u0633","\u06cc","\u0628","\u0644","\u0627","\u062a","\u0646","\u0645","\u06a9","\u06af","\u0638","\u0637","\u0632","\u0631","\u0630","\u062f","\u067e","\u0648","\u061f"],r=["q","w","e","r","t","y","u","i","o","p","[","]","a","s","d","f","g","h","j","k","l",";","'","z","x","c","v","b","n","m",",","?"],a=0,n=t.length;a<n;a++)e=e.replace(new RegExp(t[a],"g"),r[a]);return e}},{key:"createHalfSpace",value:function(e){return e?(t=/((\s\u0645\u06CC)+( )+([\u0600-\u06EF]{1,}){1,})/g,e=e.replace(new RegExp(t),"$2\u200c$4"),t=/(([\u0600-\u06EF]{1,})+( )+(\u0627\u06cc|\u0627\u06cc\u06cc|\u0627\u0646\u062f|\u0627\u06cc\u0645|\u0627\u06cc\u062f|\u0627\u0645){1})/g,e=e.replace(new RegExp(t),"$2\u200c$4")):"";var t}},{key:"convertToMoneyFormat",value:function(t){if(R.a.isNullOrEmpty(t))return"0";for(t=e.fromPersianToEnglishNumber(t);t.includes(",");)t=t.replace(",","");if(isNaN(t))return"0";for(var r=t.split("");r.length>1&&"0"===r[0];)r.splice(0,1);t="";for(var a=0,n=r.length-1;n>=0;n--)t=r[n].concat(t),++a%3===0&&0!==n&&(t=",".concat(t));return t}}]),e}();Object(O.a)(T,"arabicNumbers",["\u0661","\u0662","\u0663","\u0664","\u0665","\u0666","\u0667","\u0668","\u0669","\u0660"]),Object(O.a)(T,"persianNumbers",["\u06f1","\u06f2","\u06f3","\u06f4","\u06f5","\u06f6","\u06f7","\u06f8","\u06f9","\u06f0"]),Object(O.a)(T,"englishNumbers",["1","2","3","4","5","6","7","8","9","0"]);var k=r("halr");r.d(t,"a",(function(){return C}));var _=w.a.createElement;function S(e,t){var r=p()(e);if(h.a){var a=h()(e);t&&(a=a.filter((function(t){return c()(e,t).enumerable}))),r.push.apply(r,a)}return r}var C=function(e){function t(e){var r;return Object(m.a)(this,t),r=Object(g.a)(this,Object(y.a)(t).call(this,e)),Object(O.a)(Object(v.a)(r),"state",{text:r.props.defaultValue}),Object(O.a)(Object(v.a)(r),"lastDefaultValue",r.props.defaultValue),r.onChangeText=r.onChangeText.bind(Object(v.a)(r)),r.getText=r.getText.bind(Object(v.a)(r)),r.setText=r.setText.bind(Object(v.a)(r)),r}return Object(x.a)(t,e),Object(b.a)(t,[{key:"onChangeText",value:function(e){var t=e.target.value;t=T.fromPersianToEnglishNumber(t),t=T.fromArabicToEnglishNumber(t),t=T.fromArabicToPersianChar(t),this.setState({text:t}),this.props.onChangeText(t)}},{key:"getText",value:function(){return this.state.text}},{key:"setText",value:function(e){this.setState({text:e})}},{key:"render",value:function(){this.lastDefaultValue!==this.props.defaultValue&&(this.state.text=this.props.defaultValue,this.lastDefaultValue=this.props.defaultValue);var e=R.a.isNullOrEmpty(this.state.text),t=R.a.isPersianText(this.state.text),r=!1,a=null;!0===e&&(r=R.a.isPersianText(this.props.placeholder),a=k.a.getHeaderFont(r?"fa":"en"));var s={fontFamily:!1===e?k.a.getBodyFont(t?"fa":"en"):a,backgroundColor:E.a.editTextBackground},o=!1===e&&!0===t||!0===e&&!0===r?"rtl":"ltr",u=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){Object(O.a)(e,t,r[t])})):l.a?i()(e,l()(r)):S(Object(r)).forEach((function(t){n()(e,t,c()(r,t))}))}return e}({minWidth:this.props.minWidth},this.props.style);return _("div",{className:"form-label-group",style:u},_("input",{dir:o,maxLength:this.props.maxLength,type:this.props.type,value:this.state.text,onChange:this.onChangeText,className:"form-control baseEditText ".concat(!1===this.props.isValid?" form-control-invalid ":""," ").concat(this.props.className," "),minLength:this.props.minLength,placeholder:this.props.placeholder,style:s}))}}]),t}(N.Component);Object(O.a)(C,"defaultProps",{type:"text",maxLength:30,minLength:0,placeholder:"",defaultValue:"",className:"",isValid:!0,onChangeText:function(){},minWidth:j.a.normalButtonWidth,style:{}})}},[["K95y",1,0]]]);