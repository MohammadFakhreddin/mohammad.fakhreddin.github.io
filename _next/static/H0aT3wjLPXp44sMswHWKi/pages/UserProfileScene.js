(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{"AaH+":function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return F}));var r=s("ln6h"),a=s.n(r),n=s("MI3g"),i=s("a7VT"),u=s("AT/M"),o=s("sLSF"),c=s("Tit0"),l=s("0iUn"),d=s("vYYK"),h=s("q1tI"),f=s.n(h),b=s("7vrA"),p=s("BDHQ"),v=s("lx2u"),m=s("Gr5k"),y=s("Axit"),g=s("Ytu8"),k=s("ynrD"),x=s("IAK1"),O=s("O/Ae"),j=s("WoZq"),w=s("hDrk"),A=s("EHiG"),I=s("ljLU"),S=s("dJve"),q=s("Bvnk"),R=s("halr"),U=s("+son"),B=s("JAVg"),C=f.a.createElement,E=function e(){Object(l.a)(this,e)};Object(d.a)(E,"root",{transition:"0.5s",width:"100%",minHeight:"100%",alignItems:"center",display:"flex",flexDirection:"column",overflowX:"hidden",alignContent:"center"}),Object(d.a)(E,"card",{marginTop:"2em",marginBottom:"2em",width:"100%",display:"flex",flexDirection:"column",alignContent:"center",alignItems:"center"}),Object(d.a)(E,"informationElementSpace",{width:"1em"}),Object(d.a)(E,"downloadableContentHandler",{width:"100%"});var F=function(e){function t(e){var s;return Object(l.a)(this,t),s=Object(n.a)(this,Object(i.a)(t).call(this,e)),Object(d.a)(Object(u.a)(s),"state",{isNavBarMinimized:w.a.getInstance().getUserState().getIsNavBarMinimized(),user:null,requestState:"idle"}),Object(d.a)(Object(u.a)(s),"checkForAuthentication",!0),Object(d.a)(Object(u.a)(s),"userAccessDialog",null),Object(d.a)(Object(u.a)(s),"username",null),s.requestForUserInfo=s.requestForUserInfo.bind(Object(u.a)(s)),s.onAccessButtonPressed=s.onAccessButtonPressed.bind(Object(u.a)(s)),s.selectedNavBarKey="nav_bar_item_user_list",null!=s.props.query&&!1===U.a.isNullOrEmpty(s.props.query.username)&&(s.username=s.props.query.username),s}return Object(c.a)(t,e),Object(o.a)(t,null,[{key:"getInitialProps",value:function(e){return{query:e.query}}}]),Object(o.a)(t,[{key:"renderAfterNavbar",value:function(){var e=this,t=null==this.state.user;return C(b.a,{style:E.root},C(q.a,{ref:function(t){return e.userAccessDialog=t}}),C(v.a,{style:E.card},C(m.a,{autoJustifyContent:"from-start"},C(x.a,{text:R.a.translate("user_profile_scene_title"),size:O.d.bh3}),C("div",{className:"spacer"}),C(p.a,{isEnabled:!0,onPress:this.onAccessButtonPressed,text:R.a.translate("see_roles"),backgroundColor:O.a.lightBlue,textColor:O.a.blue,minWidth:j.a.smallButtonWidth,height:j.a.smallButtonHeight})),C(y.a,{requestState:this.state.requestState,onRetryButtonPressed:this.requestForUserInfo,rootStyle:E.downloadableContentHandler,isEmpty:t},!1===t&&C(m.a,{autoJustifyContent:"from-start",wrapElementsWhenNeeded:!0},this.renderInformationBlock({field:R.a.translate("firstname"),value:this.state.user.getFirstname()}),this.renderInformationBlock({field:R.a.translate("lastname"),value:this.state.user.getLastname()}),this.renderInformationBlock({field:R.a.translate("nationalCode"),value:this.state.user.getNationalCode()}),this.renderInformationBlock({field:R.a.translate("birthDate"),value:B.a.parseDateToString(this.state.user.getBirthDate())}),this.renderInformationBlock({field:R.a.translate("username"),value:this.state.user.getUsername()}),this.renderInformationBlock({field:R.a.translate("phoneNumber"),value:this.state.user.getPhoneNumber()}),this.renderInformationBlock({field:R.a.translate("sex"),value:this.state.user.getSexText()}),this.renderInformationBlock({field:R.a.translate("userType"),value:this.state.user.getUserTypeTitle()})))))}},{key:"sceneDidMount",value:function(){U.a.isNullOrEmpty(this.username)?A.a.navigateToHomeScene("replace"):this.requestForUserInfo()}},{key:"requestForUserInfo",value:function(){var e,t,s;return a.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:if("requesting"!==this.state.requestState){r.next=2;break}return r.abrupt("return");case 2:if(null==this.state.user){r.next=4;break}return r.abrupt("return");case 4:if(!U.a.isNullOrEmpty(this.username)){r.next=6;break}return r.abrupt("return");case 6:return r.next=8,a.a.awrap(this.setStateAsync({requestState:"requesting"}));case 8:return r.next=10,a.a.awrap(I.a.getInstance().getUserInfoByUsername({username:this.username}));case 10:if(e=r.sent,t=e.statusCode,s=e.data,t!==S.a.statusCodes.ok){r.next=17;break}this.setStateAsync({requestState:"idle",user:s}),r.next=19;break;case 17:return r.next=19,a.a.awrap(this.setStateAsync({requestState:"failed"}));case 19:case"end":return r.stop()}}),null,this)}},{key:"renderInformationBlock",value:function(e){var t=U.a.isNullOrEmpty(e.value)?R.a.translate("unknown"):String(e.value),s={minWidth:j.a.twoRowCardItemMinWidth,flex:1};return C(m.a,{autoJustifyContent:"from-start",wrapElementsWhenNeeded:!1,style:s},C(k.a,{text:String(e.field),color:O.a.grey,size:O.d.h3}),C("div",{style:E.informationElementSpace}),C(k.a,{text:t,color:O.a.black,size:O.d.h3}))}},{key:"onAccessButtonPressed",value:function(){null!=this.state.user&&this.userAccessDialog.show({user:this.state.user})}}]),t}(g.a)},Bvnk:function(e,t,s){"use strict";var r=s("p0XB"),a=s.n(r);var n=s("XXOK"),i=s.n(n),u=s("yLu3"),o=s.n(u);function c(e,t){return function(e){if(a()(e))return e}(e)||function(e,t){if(o()(Object(e))||"[object Arguments]"===Object.prototype.toString.call(e)){var s=[],r=!0,a=!1,n=void 0;try{for(var u,c=i()(e);!(r=(u=c.next()).done)&&(s.push(u.value),!t||s.length!==t);r=!0);}catch(l){a=!0,n=l}finally{try{r||null==c.return||c.return()}finally{if(a)throw n}}return s}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var l=s("ln6h"),d=s.n(l),h=s("LX0d"),f=s.n(h),b=s("sLSF"),p=s("MI3g"),v=s("a7VT"),m=s("AT/M"),y=s("Tit0"),g=s("0iUn"),k=s("vYYK"),x=s("q1tI"),O=s.n(x),j=s("zM5D"),w=s("AGX0"),A=s("BDHQ"),I=s("lvlz"),S=s("Gr5k"),q=s("Axit"),R=s("LFur"),U=s("FHuc"),B=s("ynrD"),C=s("IAK1"),E=s("O/Ae"),F=s("WoZq"),P=s("hDrk"),D=s("Uj0J"),N=s("ljLU"),T=s("dJve"),_=s("halr"),H=s("+son");s.d(t,"a",(function(){return J}));var M=O.a.createElement,L=function e(){Object(g.a)(this,e)};Object(k.a)(L,"alert",{display:"flex",width:"100%",flexDirection:"column",alignContent:"center",alignItems:"center",justifyContent:"center"}),Object(k.a)(L,"accessItemsSpace",{width:"1em"}),Object(k.a)(L,"checkboxLayout",{width:"4em",marginBottom:"2.7em"}),Object(k.a)(L,"itemSafeTouch",{width:"100%"}),Object(k.a)(L,"accessItemsParent",{width:"100%",alignItems:"center",flexDirection:"column",display:"flex",alignContent:"center",justifyContent:"center"});var J=function(e){function t(e){var s;return Object(g.a)(this,t),s=Object(p.a)(this,Object(v.a)(t).call(this,e)),Object(k.a)(Object(m.a)(s),"state",{userAssignedRoles:null,isVisible:!1,requestState:"idle"}),Object(k.a)(Object(m.a)(s),"user",null),Object(k.a)(Object(m.a)(s),"userAssignedRolesIsFilledOnce",!1),Object(k.a)(Object(m.a)(s),"userRolesAreRequestedOnce",!1),Object(k.a)(Object(m.a)(s),"alertInstance",null),Object(k.a)(Object(m.a)(s),"currentUserRoles",new f.a),s.onHideEvent=s.onHideEvent.bind(Object(m.a)(s)),s.onUpdateButtonPressed=s.onUpdateButtonPressed.bind(Object(m.a)(s)),s}return Object(y.a)(t,e),Object(b.a)(t,[{key:"show",value:function(e){return d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return this.user=e.user,this.userAssignedRolesIsFilledOnce=!1,this.userRolesAreRequestedOnce=!1,t.next=5,d.a.awrap(this.setStateAsync({isVisible:!0,requestState:"idle",userAssignedRoles:null}));case 5:this.requestForUserRoles();case 6:case"end":return t.stop()}}),null,this)}},{key:"render",value:function(){var e=this,t="";return null!=this.user&&(t=this.user.getDisplayName()),M(j.a,{show:this.state.isVisible,onHide:this.onHideEvent},M(w.a,{style:L.alert,ref:function(t){return e.alertInstance=t}}),M(j.a.Header,null,M(S.a,{autoJustifyContent:"from-start"},M(C.a,{text:_.a.translate("user_roles_dialog_title",t),size:E.d.h2,color:E.a.black}),M("div",{className:"spacer"}))),M(j.a.Body,null,M(q.a,{requestState:this.state.requestState,isEmpty:!1,onRetryButtonPressed:this.requestForUserRoles},this.renderAccessItems())),M(j.a.Footer,null,M(S.a,{autoJustifyContent:"from-end"},M(A.a,{text:_.a.translate("user_role_update_button"),onPress:this.onUpdateButtonPressed,minWidth:F.a.smallButtonWidth,needsLoadingOnPress:!0}))))}},{key:"onHideEvent",value:function(){this.setStateAsync({isVisible:!1})}},{key:"onUpdateButtonPressed",value:function(){var e,t,s,r,a,n,u,o,l,h,f,b,p,v,m,y,g,k,x,O,j,w;return d.a.async((function(A){for(;;)switch(A.prev=A.next){case 0:if("requesting"!==this.state.requestState&&"failed"!==this.state.requestState){A.next=2;break}return A.abrupt("return");case 2:if(e=[],t=[],!1!==H.a.isEmptyMap(this.state.userAssignedRoles)){A.next=24;break}for(s=!0,r=!1,a=void 0,A.prev=8,n=i()(this.state.userAssignedRoles);!(s=(u=n.next()).done);s=!0)o=c(u.value,2),l=o[0],!0===(h=o[1])&&!1===this.currentUserRoles.has(l)?e.push(l):!1===h&&!0===this.currentUserRoles.has(l)&&t.push(l);A.next=16;break;case 12:A.prev=12,A.t0=A.catch(8),r=!0,a=A.t0;case 16:A.prev=16,A.prev=17,s||null==n.return||n.return();case 19:if(A.prev=19,!r){A.next=22;break}throw a;case 22:return A.finish(19);case 23:return A.finish(16);case 24:return A.next=26,d.a.awrap(N.a.getInstance().addRolesToUser({username:this.user.getUsername(),roles:e}));case 26:if(f=A.sent,b=f.statusCode,p=f.errorDescription,b===T.a.statusCodes.ok){A.next=32;break}return this.alertInstance.show({title:_.a.translate("error"),description:_.a.translateErrorCode(b,p),isSuccess:!1}),A.abrupt("return");case 32:if(!1!==H.a.isEmptyArray(t)){A.next=65;break}v=!0,m=!1,y=void 0,A.prev=36,g=i()(t);case 38:if(v=(k=g.next()).done){A.next=51;break}return x=k.value,A.next=42,d.a.awrap(N.a.getInstance().removeRoleFromUser({userName:this.user.getUsername(),roleName:x}));case 42:if(O=A.sent,j=O.statusCode,w=O.errorDescription,j===T.a.statusCodes.ok){A.next=48;break}return this.alertInstance.show({title:_.a.translate("error"),description:_.a.translateErrorCode(j,w),isSuccess:!1}),A.abrupt("return");case 48:v=!0,A.next=38;break;case 51:A.next=57;break;case 53:A.prev=53,A.t1=A.catch(36),m=!0,y=A.t1;case 57:A.prev=57,A.prev=58,v||null==g.return||g.return();case 60:if(A.prev=60,!m){A.next=63;break}throw y;case 63:return A.finish(60);case 64:return A.finish(57);case 65:this.setStateAsync({isVisible:!1});case 66:case"end":return A.stop()}}),null,this,[[8,12,16,24],[17,,19,23],[36,53,57,65],[58,,60,64]])}},{key:"requestForUserRoles",value:function(){var e,t,s,r,a,n,u,o,l,h,b,p,v,m,y,g,k;return d.a.async((function(x){for(;;)switch(x.prev=x.next){case 0:if("requesting"!==this.state.requestState){x.next=2;break}return x.abrupt("return");case 2:return x.next=4,d.a.awrap(this.setStateAsync({requestState:"requesting"}));case 4:if(!1!==P.a.getInstance().getUserState().getIsRolesFilledOnce()){x.next=13;break}return x.next=7,d.a.awrap(N.a.getInstance().getRoles());case 7:if(e=x.sent,e.statusCode===T.a.statusCodes.ok){x.next=13;break}return x.next=12,d.a.awrap(this.setStateAsync({requestState:"failed"}));case 12:return x.abrupt("return");case 13:if(!1!==this.userAssignedRolesIsFilledOnce){x.next=36;break}if(this.state.userAssignedRoles=new f.a,!1!==H.a.isEmptyMap(P.a.getInstance().getUserState().getRoles())){x.next=35;break}for(t=!0,s=!1,r=void 0,x.prev=19,a=i()(P.a.getInstance().getUserState().getRoles());!(t=(n=a.next()).done);t=!0)u=c(n.value,1),o=u[0],this.state.userAssignedRoles.set(o,!1);x.next=27;break;case 23:x.prev=23,x.t0=x.catch(19),s=!0,r=x.t0;case 27:x.prev=27,x.prev=28,t||null==a.return||a.return();case 30:if(x.prev=30,!s){x.next=33;break}throw r;case 33:return x.finish(30);case 34:return x.finish(27);case 35:this.userAssignedRolesIsFilledOnce=!0;case 36:if(!1!==this.userRolesAreRequestedOnce){x.next=68;break}return x.next=39,d.a.awrap(N.a.getInstance().getUserRoles({username:this.user.getUsername()}));case 39:if(l=x.sent,h=l.statusCode,b=l.data,h===T.a.statusCodes.ok){x.next=46;break}return x.next=45,d.a.awrap(this.setStateAsync({requestState:"failed"}));case 45:return x.abrupt("return");case 46:if(this.currentUserRoles=new f.a,!1!==H.a.isEmptyArray(b)){x.next=67;break}for(p=!0,v=!1,m=void 0,x.prev=51,y=i()(b);!(p=(g=y.next()).done);p=!0)k=g.value,this.state.userAssignedRoles.has(k)?this.state.userAssignedRoles.set(k,!0):D.a.error("Invalid userRole which does not exists is GlobalRoles detected:"+k),this.currentUserRoles.set(k,!0);x.next=59;break;case 55:x.prev=55,x.t1=x.catch(51),v=!0,m=x.t1;case 59:x.prev=59,x.prev=60,p||null==y.return||y.return();case 62:if(x.prev=62,!v){x.next=65;break}throw m;case 65:return x.finish(62);case 66:return x.finish(59);case 67:this.userRolesAreRequestedOnce=!0;case 68:return x.next=70,d.a.awrap(this.setStateAsync({requestState:"idle"}));case 70:case"end":return x.stop()}}),null,this,[[19,23,27,35],[28,,30,34],[51,55,59,67],[60,,62,66]])}},{key:"renderAccessItems",value:function(){var e=this,t=[];if(!1===H.a.isEmptyMap(this.state.userAssignedRoles)){var s=null,r=!0,a=!1,n=void 0;try{for(var u,o=function(){var r=c(u.value,2),a=r[0],n=r[1];s=function(){e.state.userAssignedRoles.set(a,!n),e.setStateAsync({userAssignedRoles:e.state.userAssignedRoles})},t.push(M(I.a,{onPress:s,key:a,style:L.itemSafeTouch},M(S.a,{autoJustifyContent:"from-start"},M("div",{style:L.checkboxLayout},M(R.a,{isChecked:n})),M("div",{style:L.accessItemsSpace}),M(B.a,{text:a,color:E.a.black,size:E.d.h3}))))},l=i()(this.state.userAssignedRoles);!(r=(u=l.next()).done);r=!0)o()}catch(d){a=!0,n=d}finally{try{r||null==l.return||l.return()}finally{if(a)throw n}}}return M("div",{style:L.accessItemsParent},t)}}]),t}(U.a)},FMur:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/UserProfileScene",function(){return s("AaH+")}])},LFur:function(e,t,s){"use strict";s.d(t,"a",(function(){return h}));var r=s("0iUn"),a=s("sLSF"),n=s("MI3g"),i=s("a7VT"),u=s("Tit0"),o=s("vYYK"),c=s("q1tI"),l=s.n(c),d=l.a.createElement,h=function(e){function t(){return Object(r.a)(this,t),Object(n.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(a.a)(t,[{key:"render",value:function(){return d("input",{type:"checkbox",className:"form-check-input",checked:this.props.isChecked,readOnly:!0})}}]),t}(l.a.Component);Object(o.a)(h,"defaultProps",{isChecked:!1})}},[["FMur",1,0]]]);