(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"6xyR":function(e,t,a){"use strict";var n=a("wx14"),r=a("zLVn"),s=a("TSYQ"),i=a.n(s),c=a("q1tI"),o=a.n(c),l=a("vUet"),u=a("YdCC"),d=a("U1MP"),p=a("Wzyw"),f=o.a.forwardRef((function(e,t){var a=e.bsPrefix,s=e.className,c=e.variant,u=e.as,d=void 0===u?"img":u,p=Object(r.a)(e,["bsPrefix","className","variant","as"]),f=Object(l.b)(a,"card-img");return o.a.createElement(d,Object(n.a)({ref:t,className:i()(c?f+"-"+c:f,s)},p))}));f.displayName="CardImg",f.defaultProps={variant:null};var y=f,h=Object(d.a)("h5"),g=Object(d.a)("h6"),v=Object(u.a)("card-body"),b=o.a.forwardRef((function(e,t){var a=e.bsPrefix,s=e.className,u=e.bg,d=e.text,f=e.border,y=e.body,h=e.children,g=e.as,b=void 0===g?"div":g,m=Object(r.a)(e,["bsPrefix","className","bg","text","border","body","children","as"]),x=Object(l.b)(a,"card"),O=Object(c.useMemo)((function(){return{cardHeaderBsPrefix:x+"-header"}}),[x]);return o.a.createElement(p.a.Provider,{value:O},o.a.createElement(b,Object(n.a)({ref:t},m,{className:i()(s,x,u&&"bg-"+u,d&&"text-"+d,f&&"border-"+f)}),y?o.a.createElement(v,null,h):h))}));b.displayName="Card",b.defaultProps={body:!1},b.Img=y,b.Title=Object(u.a)("card-title",{Component:h}),b.Subtitle=Object(u.a)("card-subtitle",{Component:g}),b.Body=v,b.Link=Object(u.a)("card-link",{Component:"a"}),b.Text=Object(u.a)("card-text",{Component:"p"}),b.Header=Object(u.a)("card-header"),b.Footer=Object(u.a)("card-footer"),b.ImgOverlay=Object(u.a)("card-img-overlay");t.a=b},JWPE:function(e,t,a){"use strict";var n=a("sLSF"),r=a("MI3g"),s=a("a7VT"),i=a("Tit0"),c=a("0iUn"),o=a("vYYK"),l=a("q1tI"),u=a.n(l),d=a("wx14"),p=a("zLVn"),f=a("TSYQ"),y=a.n(f),h=a("JCAc"),g=a("vUet"),v=a("ILyh"),b=u.a.createContext(null);var m,x=u.a.forwardRef((function(e,t){var a=e.as,n=void 0===a?"button":a,r=e.children,s=e.eventKey,i=e.onClick,c=Object(p.a)(e,["as","children","eventKey","onClick"]),o=function(e,t){var a=Object(l.useContext)(b),n=Object(l.useContext)(v.a);return function(r){n(e===a?null:e,r),t&&t(r)}}(s,i);return u.a.createElement(n,Object(d.a)({ref:t,onClick:o},c),r)})),O=a("dI71"),j=a("7j6X"),A=a("YECM"),k=a("dRu9"),E=a("Qg85"),w=a("z+q/"),C={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};var I=((m={})[k.c]="collapse",m[k.d]="collapsing",m[k.b]="collapsing",m[k.a]="collapse show",m),T={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,dimension:"height",getDimensionValue:function(e,t){var a=t["offset"+e[0].toUpperCase()+e.slice(1)],n=C[e];return a+parseInt(Object(j.a)(t,n[0]),10)+parseInt(Object(j.a)(t,n[1]),10)}},S=function(e){function t(){for(var t,a=arguments.length,n=new Array(a),r=0;r<a;r++)n[r]=arguments[r];return(t=e.call.apply(e,[this].concat(n))||this).handleEnter=function(e){e.style[t.getDimension()]="0"},t.handleEntering=function(e){var a=t.getDimension();e.style[a]=t._getScrollDimensionValue(e,a)},t.handleEntered=function(e){e.style[t.getDimension()]=null},t.handleExit=function(e){var a=t.getDimension();e.style[a]=t.props.getDimensionValue(a,e)+"px",Object(w.a)(e)},t.handleExiting=function(e){e.style[t.getDimension()]=null},t}Object(O.a)(t,e);var a=t.prototype;return a.getDimension=function(){return"function"===typeof this.props.dimension?this.props.dimension():this.props.dimension},a._getScrollDimensionValue=function(e,t){return e["scroll"+t[0].toUpperCase()+t.slice(1)]+"px"},a.render=function(){var e=this,t=this.props,a=t.onEnter,n=t.onEntering,r=t.onEntered,s=t.onExit,i=t.onExiting,c=t.className,o=t.children,l=Object(p.a)(t,["onEnter","onEntering","onEntered","onExit","onExiting","className","children"]);delete l.dimension,delete l.getDimensionValue;var f=Object(E.a)(this.handleEnter,a),h=Object(E.a)(this.handleEntering,n),g=Object(E.a)(this.handleEntered,r),v=Object(E.a)(this.handleExit,s),b=Object(E.a)(this.handleExiting,i);return u.a.createElement(k.e,Object(d.a)({addEndListener:A.a},l,{"aria-expanded":l.role?l.in:null,onEnter:f,onEntering:h,onEntered:g,onExit:v,onExiting:b}),(function(t,a){return u.a.cloneElement(o,Object(d.a)({},a,{className:y()(c,o.props.className,I[t],"width"===e.getDimension()&&"width")}))}))},t}(u.a.Component);S.defaultProps=T;var M=S,N=u.a.forwardRef((function(e,t){var a=e.children,n=e.eventKey,r=Object(p.a)(e,["children","eventKey"]),s=Object(l.useContext)(b);return u.a.createElement(M,Object(d.a)({ref:t,in:s===n},r),u.a.createElement("div",null,u.a.Children.only(a)))}));N.displayName="AccordionCollapse";var R=N,_=u.a.forwardRef((function(e,t){var a=Object(h.a)(e,{activeKey:"onSelect"}),n=a.as,r=void 0===n?"div":n,s=a.activeKey,i=a.bsPrefix,c=a.children,o=a.className,l=a.onSelect,f=Object(p.a)(a,["as","activeKey","bsPrefix","children","className","onSelect"]);return i=Object(g.b)(i,"accordion"),u.a.createElement(b.Provider,{value:s},u.a.createElement(v.a.Provider,{value:l},u.a.createElement(r,Object(d.a)({ref:t},f,{className:y()(o,i)}),c)))}));_.Toggle=x,_.Collapse=R;var P=_,q=a("6xyR"),K=function e(){Object(c.a)(this,e)};Object(o.a)(K,"borderedCard",{borderWidth:"0.05em",width:"100%",display:"flex",alignContent:"center",alignItems:"center",justifyContent:"center"});var U=a("Gr5k"),D=a("IAK1");a.d(t,"a",(function(){return G}));var B=u.a.createElement,L=function e(){Object(c.a)(this,e)};Object(o.a)(L,"filterAccordion",{width:"100%"});var G=function(e){function t(){return Object(c.a)(this,t),Object(r.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(i.a)(t,e),Object(n.a)(t,[{key:"render",value:function(){var e=!0===this.props.isOpenByDefault?"1":"0";return B(P,{defaultActiveKey:e,style:L.filterAccordion},B(q.a,{style:K.borderedCard},B(P.Toggle,{as:q.a.Header,eventKey:"1",style:L.filterAccordion},B(U.a,{autoJustifyContent:"from-start"},B(D.a,{text:this.props.header}))),B(P.Collapse,{eventKey:"1",style:L.filterAccordion},B(q.a.Body,{style:L.filterAccordion},this.props.bodyComponent,this.props.children))))}}]),t}(l.Component);Object(o.a)(G,"defaultProps",{bodyComponent:null,header:null,isOpenByDefault:!1})},LFur:function(e,t,a){"use strict";a.d(t,"a",(function(){return p}));var n=a("0iUn"),r=a("sLSF"),s=a("MI3g"),i=a("a7VT"),c=a("Tit0"),o=a("vYYK"),l=a("q1tI"),u=a.n(l),d=u.a.createElement,p=function(e){function t(){return Object(n.a)(this,t),Object(s.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return d("input",{type:"checkbox",className:"form-check-input",checked:this.props.isChecked,readOnly:!0})}}]),t}(u.a.Component);Object(o.a)(p,"defaultProps",{isChecked:!1})},Wzyw:function(e,t,a){"use strict";var n=a("q1tI"),r=a.n(n);t.a=r.a.createContext(null)},k5XH:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return B}));var n=a("ln6h"),r=a.n(n),s=a("XXOK"),i=a.n(s),c=a("LX0d"),o=a.n(c),l=a("MI3g"),u=a("a7VT"),d=a("AT/M"),p=a("sLSF"),f=a("Tit0"),y=a("0iUn"),h=a("vYYK"),g=a("q1tI"),v=a.n(g),b=a("7vrA"),m=a("JWPE"),x=a("BDHQ"),O=a("lvlz"),j=a("lx2u"),A=a("Gr5k"),k=a("Axit"),E=a("LFur"),w=a("Ytu8"),C=a("ynrD"),I=a("IAK1"),T=a("O/Ae"),S=a("WoZq"),M=a("hDrk"),N=a("Uj0J"),R=a("EHiG"),_=a("ljLU"),P=a("dJve"),q=a("halr"),K=a("+son"),U=v.a.createElement,D=function e(){Object(y.a)(this,e)};Object(h.a)(D,"root",{transition:"0.5s",width:"100%",minHeight:"100%",alignItems:"center",display:"flex",flexDirection:"column",overflowX:"hidden",alignContent:"center"}),Object(h.a)(D,"card",{marginTop:"2em",marginBottom:"2em",width:"100%",display:"flex",flexDirection:"column",alignContent:"center",alignItems:"center"}),Object(h.a)(D,"downloadableContentHandler",{width:"100%",marginTop:"0.5em"}),Object(h.a)(D,"actionGroupLayout",{width:"100%",display:"flex",alignContent:"center",justifyContent:"center",alignItems:"center",flexDirection:"column",marginBottom:"1em"}),Object(h.a)(D,"accessItemsSpace",{width:"1em"}),Object(h.a)(D,"checkboxLayout",{width:"4em",marginBottom:"2.7em"}),Object(h.a)(D,"accessItemsParent",{width:"100%",alignItems:"center",flexDirection:"column",display:"flex",alignContent:"center",justifyContent:"center"});var B=function(e){function t(e){var a;return Object(y.a)(this,t),a=Object(l.a)(this,Object(u.a)(t).call(this,e)),Object(h.a)(Object(d.a)(a),"state",{isNavBarMinimized:M.a.getInstance().getUserState().getIsNavBarMinimized(),requestState:"idle",selectedRole:null,selectedActionTypeMap:new o.a}),Object(h.a)(Object(d.a)(a),"roleName",null),a.requestForInfo=a.requestForInfo.bind(Object(d.a)(a)),a.onUpdateRoleAccessesButtonPressed=a.onUpdateRoleAccessesButtonPressed.bind(Object(d.a)(a)),a.selectedNavBarKey="nav_bar_item_roles_list",null!=a.props.query&&!1===K.a.isNullOrEmpty(a.props.query.roleName)&&(a.roleName=a.props.query.roleName),a}return Object(f.a)(t,e),Object(p.a)(t,null,[{key:"getInitialProps",value:function(e){return{query:e.query}}}]),Object(p.a)(t,[{key:"sceneDidMount",value:function(){K.a.isNullOrEmpty(this.roleName)?R.a.navigateToHomeScene("replace"):this.requestForInfo()}},{key:"renderAfterNavbar",value:function(){var e=null==this.state.selectedRole;return U(b.a,{style:D.root},U(j.a,{style:D.card},U(A.a,{autoJustifyContent:"from-start"},U(I.a,{size:T.d.bh3,text:q.a.translate("modify_role_access_card_title",this.roleName)}),U("div",{className:"spacer"}),U(x.a,{text:q.a.translate("modify_role_access_scene_update"),minWidth:S.a.smallButtonWidth,height:S.a.smallButtonHeight,needsLoadingOnPress:!0,onPress:this.onUpdateRoleAccessesButtonPressed})),U(k.a,{requestState:this.state.requestState,onRetryButtonPressed:this.requestForInfo,rootStyle:D.downloadableContentHandler,isEmpty:e,emptyText:q.a.translate("modify_role_access_role_not_found")},"idle"===this.state.requestState&&!1===e&&this.renderAccessGroups())))}},{key:"requestForInfo",value:function(){var e,t,a,n,s,c,o,l,u,d;return r.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:if("requesting"!==this.state.requestState){p.next=2;break}return p.abrupt("return");case 2:return p.next=4,r.a.awrap(this.setStateAsync({requestState:"requesting"}));case 4:if(!1!==M.a.getInstance().getUserState().getIsRolesFilledOnce()){p.next=11;break}return p.next=7,r.a.awrap(_.a.getInstance().getRoles());case 7:if(e=p.sent,e.statusCode===P.a.statusCodes.ok){p.next=11;break}return p.abrupt("return",this.setStateAsync({requestState:"failed"}));case 11:if(!1!==M.a.getInstance().getUserState().getActionGroupIsLoadedOnce()){p.next=18;break}return p.next=14,r.a.awrap(_.a.getInstance().getActionGroups());case 14:if(t=p.sent,t.statusCode===P.a.statusCodes.ok){p.next=18;break}return p.abrupt("return",this.setStateAsync({requestState:"failed"}));case 18:if(!1!==K.a.isEmptyMap(M.a.getInstance().getUserState().getActionGroupsMap())){p.next=50;break}a=!0,n=!1,s=void 0,p.prev=22,c=i()(M.a.getInstance().getUserState().getActionGroupsMap().values());case 24:if(a=(o=c.next()).done){p.next=36;break}if(!1!==(l=o.value).getActionTypeAreLoadedOnce()){p.next=33;break}return p.next=29,r.a.awrap(_.a.getInstance().getActionTypeOfActionGroup({actionGroupId:l.getKey()}));case 29:if(u=p.sent,u.statusCode===P.a.statusCodes.ok){p.next=33;break}return p.abrupt("return",this.setStateAsync({requestState:"failed"}));case 33:a=!0,p.next=24;break;case 36:p.next=42;break;case 38:p.prev=38,p.t0=p.catch(22),n=!0,s=p.t0;case 42:p.prev=42,p.prev=43,a||null==c.return||c.return();case 45:if(p.prev=45,!n){p.next=48;break}throw s;case 48:return p.finish(45);case 49:return p.finish(42);case 50:if(null==this.state.selectedRole&&!0===M.a.getInstance().getUserState().getRoles().has(this.roleName)&&(this.state.selectedRole=M.a.getInstance().getUserState().getRoles().get(this.roleName)),null==this.state.selectedRole){p.next=60;break}if(!1!==this.state.selectedRole.getActionTypeAreLoadedOnce()){p.next=59;break}return p.next=55,r.a.awrap(_.a.getInstance().getRoleActionType({roleName:this.state.selectedRole.getKey()}));case 55:if(d=p.sent,d.statusCode===P.a.statusCodes.ok){p.next=59;break}return p.abrupt("return",this.setStateAsync({requestState:"failed"}));case 59:this.fillSelectedActionTypeMap();case 60:return p.next=62,r.a.awrap(this.setStateAsync({requestState:"idle"}));case 62:case"end":return p.stop()}}),null,this,[[22,38,42,50],[43,,45,49]])}},{key:"fillSelectedActionTypeMap",value:function(){this.state.selectedActionTypeMap=new o.a;var e=M.a.getInstance().getUserState().getActionGroupsMap();if(!1===K.a.isEmptyMap(e)){var t=!0,a=!1,n=void 0;try{for(var r,s=i()(e.values());!(t=(r=s.next()).done);t=!0){var c=r.value;if(!1===K.a.isEmptyMap(c.getActionTypes())){var l=!0,u=!1,d=void 0;try{for(var p,f=i()(c.getActionTypes().values());!(l=(p=f.next()).done);l=!0){var y=p.value;this.state.selectedActionTypeMap.set(y.getKey(),!1)}}catch(O){u=!0,d=O}finally{try{l||null==f.return||f.return()}finally{if(u)throw d}}}}}catch(O){a=!0,n=O}finally{try{t||null==s.return||s.return()}finally{if(a)throw n}}}if(!1===K.a.isEmptyMap(this.state.selectedRole.getActionTypes())){var h=!0,g=!1,v=void 0;try{for(var b,m=i()(this.state.selectedRole.getActionTypes().values());!(h=(b=m.next()).done);h=!0){var x=b.value;!0===this.state.selectedActionTypeMap.has(x.getKey())?this.state.selectedActionTypeMap.set(x.getKey(),!0):N.a.error("Role has actionType that does not exists in actionMap,"+x)}}catch(O){g=!0,v=O}finally{try{h||null==m.return||m.return()}finally{if(g)throw v}}}}},{key:"renderAccessGroups",value:function(){var e=[];if(!1===K.a.isEmptyMap(M.a.getInstance().getUserState().getActionGroupsMap())){var t=!0,a=!1,n=void 0;try{for(var r,s=i()(M.a.getInstance().getUserState().getActionGroupsMap().values());!(t=(r=s.next()).done);t=!0){var c=r.value;e.push(U("div",{style:D.actionGroupLayout,key:c.getKey()},U(m.a,{isOpenByDefault:!0,header:q.a.translate("modify_role_access_scene_action_group_title",c.getName())},U(A.a,{autoJustifyContent:"from-start",wrapElementsWhenNeeded:!0},this.renderAccessTypes(c)))))}}catch(o){a=!0,n=o}finally{try{t||null==s.return||s.return()}finally{if(a)throw n}}}return e}},{key:"renderAccessTypes",value:function(e){var t=this,a=[];if(!1===K.a.isEmptyMap(e.getActionTypes())){var n=null,r=null,s={minWidth:S.a.twoRowCardItemMinWidth,flex:1},c=null,o=M.a.getInstance().getUserState().getIsRtl()?"right":"left",l=!0,u=!1,d=void 0;try{for(var p,f=function(){var e=p.value;n=function(){return t.onActionTypePressed(e.getKey())},r=t.state.selectedActionTypeMap.get(e.getKey()),c="".concat(e.getDescription()," (").concat(e.getValue(),") "),a.push(U(O.a,{onPress:n,key:e.getKey(),style:s},U(A.a,{autoJustifyContent:"from-start"},U("div",{style:D.checkboxLayout},U(E.a,{isChecked:r})),U("div",{style:D.accessItemsSpace}),U(C.a,{text:c,color:T.a.black,size:T.d.h3,textAlign:o}))))},y=i()(e.getActionTypes().values());!(l=(p=y.next()).done);l=!0)f()}catch(h){u=!0,d=h}finally{try{l||null==y.return||y.return()}finally{if(u)throw d}}}return a}},{key:"onActionTypePressed",value:function(e){if(!1===this.state.selectedActionTypeMap.has(e))return N.a.error("Selected actionTypeKey does not exists,"+e);this.state.selectedActionTypeMap.set(e,!this.state.selectedActionTypeMap.get(e)),this.setStateAsync({selectedActionTypeMap:this.state.selectedActionTypeMap})}},{key:"onUpdateRoleAccessesButtonPressed",value:function(){var e,t,a,n,s,c,o,l,u,d,p,f,y,h,g,v;return r.a.async((function(b){for(;;)switch(b.prev=b.next){case 0:if("idle"===this.state.requestState&&null!=this.state.selectedRole&&null!=this.state.selectedActionTypeMap){b.next=2;break}return b.abrupt("return");case 2:if(e=[],!1!==K.a.isEmptyMap(M.a.getInstance().getUserState().getActionGroupsMap())){b.next=48;break}t=!0,a=!1,n=void 0,b.prev=7,s=i()(M.a.getInstance().getUserState().getActionGroupsMap().values());case 9:if(t=(c=s.next()).done){b.next=34;break}if(o=c.value,!1!==K.a.isEmptyMap(o.getActionTypes())){b.next=31;break}for(l=!0,u=!1,d=void 0,b.prev=15,p=i()(o.getActionTypes().values());!(l=(f=p.next()).done);l=!0)y=f.value,this.state.selectedActionTypeMap.has(y.getKey())&&!0===this.state.selectedActionTypeMap.get(y.getKey())&&e.push(y);b.next=23;break;case 19:b.prev=19,b.t0=b.catch(15),u=!0,d=b.t0;case 23:b.prev=23,b.prev=24,l||null==p.return||p.return();case 26:if(b.prev=26,!u){b.next=29;break}throw d;case 29:return b.finish(26);case 30:return b.finish(23);case 31:t=!0,b.next=9;break;case 34:b.next=40;break;case 36:b.prev=36,b.t1=b.catch(7),a=!0,n=b.t1;case 40:b.prev=40,b.prev=41,t||null==s.return||s.return();case 43:if(b.prev=43,!a){b.next=46;break}throw n;case 46:return b.finish(43);case 47:return b.finish(40);case 48:return b.next=50,r.a.awrap(_.a.getInstance().addActionTypeToRole({roleName:this.state.selectedRole.getName(),actionTypes:e}));case 50:h=b.sent,g=h.statusCode,v=h.errorDescription,g===P.a.statusCodes.ok?this.alertInstance.show({title:q.a.translate("success"),description:q.a.translate("modify_role_scene_update_successful"),isSuccess:!0}):this.alertInstance.show({title:q.a.translate("error"),description:q.a.translateErrorCode(g,v),isSuccess:!1});case 54:case"end":return b.stop()}}),null,this,[[7,36,40,48],[15,19,23,31],[24,,26,30],[41,,43,47]])}}]),t}(w.a)},tVgr:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/ModifyRoleAccessScene",function(){return a("k5XH")}])}},[["tVgr",1,0]]]);